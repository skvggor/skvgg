---
import Layout from '../layouts/Layout.astro'

import SiteTagline from '../components/SiteTagline.astro'
import SocialLinks from '../components/SocialLinks.astro'
import LastFM from '../components/LastFM.astro'
---
<script>
  const loading = () => {
    const mainElement = document.querySelectorAll('.main > *')
    const DELAY = 250

    const addClassWithDelay = (element: any, index: any) => {
      setTimeout(() => {
        element.classList.add('loaded')
      }, DELAY * index)
    }

    mainElement?.forEach((element, index) =>
      addClassWithDelay(element, index))
  }

  // fake loading
  setTimeout(loading, 1000)
</script>

<Layout title="skvggor - software developer">
  <main class="main">
    <SiteTagline />
    <SocialLinks />

    <div class="player">
      <LastFM client:load />
    </div>
  </main>
</Layout>

<style lang="styl">
  .main
    align-items center
    display flex
    flex-direction column
    justify-content center
    min-height 100vh
    padding 0 20px

    :global(> *)
      opacity 0
      transform scale(.95)
      transition all 1s ease-in-out

    :global(> .loaded)
      opacity 1
      transform scale(1)

    .player
      bottom 20px
      margin 0 20px
      position absolute
</style>
